<div class="container text-center mt-4">
  <h1>Ver vacaciones</h1>
</div>

<div class="container py-4 calendar-size">
  @if (this.user.rol.name === 'ADMIN') {
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h3>Filtrar por usuario</h3>
      <button class="btn btn-blueGFT" (click)="clearFilters()">Quitar filtros</button>
    </div>

    <!-- Input de bÃºsqueda en lugar de <select> -->
    <div class="mb-4 position-relative">
      <input
        type="text"
        class="form-control"
        placeholder="Busca un usuario..."
        [(ngModel)]="searchTerm"
        (ngModelChange)="onSearchTermChange($event)"
        (keydown.enter)="selectUserFromInput()"
        (focus)="showDropdown = true"
        (blur)="hideDropdown()"
      />

      <!-- Dropdown de sugerencias -->
      @if (showDropdown && filteredUsers.length) {
        <ul class="list-group position-absolute w-100" style="z-index:10;">
          @for (user of filteredUsers; track user.personId) {
            <li class="list-group-item list-group-item-action" (mousedown)="onUserSelect(user.personId)">
              {{ user.name }} {{ user.lastName }}
            </li>
          }
        </ul>
      }
    </div>
  }

  <app-calendar
    [mode]="'show'"
    [events]="usersEvents"
    (dayDetails)="onDayDetails($event)"
  ></app-calendar>
</div>
